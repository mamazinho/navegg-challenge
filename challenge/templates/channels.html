<section class="content" ng-controller="ChannelsCtrl">

    <span>This tab shows the channels that was asked in Front-end challenge, here you can crete, update and delete a channel and see your children</span>
    <div ng-show="openCreateModal==false" class="buttons">
        <button ng-click="openCreateModal=true">Create new channel</button>
    </div>

    <div class="modal" ng-show="openCreateModal">
        {% include 'modals/__createChannel.html' %}
    </div>

    <div class="modal" ng-show="openEditModal">
        {% include 'modals/__editChannel.html' %}
    </div>

    <div class="group">
        <ul class="main-table" ng-repeat="channel in channels track by $index" ng-include="'tree_item_renderer.html'"></ul>
    </div>

</section>

<script type="text/ng-template" id="tree_item_renderer.html">
    <ul>
        <li style="cursor: pointer;" ng-click="viewChildren(channel.id)"><span ng-if="channel.children.length > 0">&#10148;</span></li>
        <li>{[ channel.name ]}</li>
        <li>Users ({[ channel.users ]})</li>
        <li>Percent ({[ channel.percent ]})</li>
        <li>Parent ID ({[ channel.parent ]})</li>
        <li ng-click="editModal(channel)"><button>Edit</button></li>
        <li ng-click="deleteChannel(channel.id)"><button>Delete</button></li>
        <li ng-show="treeIds.includes(channel.id)">
            <ul class="main-table" ng-repeat="channel in channel.children" ng-include="'tree_item_renderer.html'"></ul>
        </li>
    </ul>
</script>